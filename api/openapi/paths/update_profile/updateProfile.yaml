post:
  tags:
    - Member
  summary: Update the profile of a user
  operationId: 'getUpdateProfile'
  description: >-
    This RPC updates the profile of the currently authenticated member,
    defined by its authentication token. Only publicly visible contact
    fields (fields marked with the attribute geosafeea:public) are updated,
    the other fields are ignored if set. The updated profile is then
    returned.


    **Important**:


    1. **The whole "profile" section MUST be passed for each call to this
    RPC**; omitting a field means removing that field from the profile.
        
    2. **New contact methods (Emails, Phones) must be inserted in the
    "unverified" section of the profile at first**
        
        1. These new contact methods are then validated one by one using verification RPCs of the member/ API
        2. Once validated (verified) a contact method is moved out from the unverified section up to the root of the profile.
            

    **Notes:**


    - Profile.id value is not read/updated by the backend: it should be left
    empty.
  requestBody:
    content:
      application/json:
        schema:
          type: object
          example:
            authToken: >-
              MockGUIDAuthToken
            profile:
              id: ''
              enabled: false
              firstname: ''
              lastname: ''
              emails:
                - roger.rabbit@intersec.com
              mobilePhones:
                - +336********
              homePhones: []
              language: EN
              additionals: []
              unverified:
                emails: []
                mobilePhones: []
                homePhones:
                  - address: +336********
              pois:
                - address: Exeter, Royaume-Uni
                  coordinates:
                    latitude: 50726037
                    longitude: -3527489
  parameters:
    - name: Content-Type
      in: header
      schema:
        type: string
      example: application/json
    - name: Accept
      in: header
      schema:
        type: string
      example: application/json
  responses:
    '200':
      description: OK
      headers:
        Date:
          schema:
            type: string
            example: Fri, 14 Apr 2023 11:23:11 GMT
        Server:
          schema:
            type: string
            example: Apache/2.4.38 (Debian)
        Accept-Encoding:
          schema:
            type: string
            example: identity, gzip, deflate
        Access-Control-Allow-Origin:
          schema:
            type: string
            example: '*'
        Cache-Control:
          schema:
            type: string
            example: no-store, no-cache, must-revalidate
        Pragma:
          schema:
            type: string
            example: no-cache
        Content-Type:
          schema:
            type: string
            example: application/json; charset=utf-8
        Content-Encoding:
          schema:
            type: string
            example: gzip
        Content-Length:
          schema:
            type: integer
            example: '176'
        Keep-Alive:
          schema:
            type: string
            example: timeout=5, max=100
        Connection:
          schema:
            type: string
            example: Keep-Alive
      content:
        application/json:
          schema:
            type: object
          examples:
            example-0:
              summary: Updated the profile of a user (simple)
              value:
                authToken: >-
                  gAAAAABkOTd_oh-J9BgJ8yvLLgU16Fj8d4MTLjL4dd7ho6crKo10hVJjYJZccThQoA_54YaWTXJ3UkGbEqURemIdkM4bbJepXL-Qo5KZoY2vajHEcioSYibC6pJhj0if9xhcjgjTsiGJAbTs_wL6RJvT2AiSzLhIyXzw2aLreb3ac9AT8-fSbD-1yMuuPVty_KKWvqZBEO1i
                profile:
                  id: ''
                  enabled: false
                  firstname: Javier
                  lastname: Rabbit
                  emails: []
                  mobilePhones: []
                  homePhones: []
                  language: EN
                  additionals: []
                  unverified:
                    emails: []
                    mobilePhones: []
                    homePhones:
                      - address: +331********
                  pois:
                    - address: Exeter, Royaume-Uni
                      coordinates:
                        latitude: 50726037
                        longitude: -3527489
            example-1:
              summary: >-
                Updated the profile of a user with several POIs, with
                coordinates
              value:
                authToken: >-
                  gAAAAABkOTd_oh-J9BgJ8yvLLgU16Fj8d4MTLjL4dd7ho6crKo10hVJjYJZccThQoA_54YaWTXJ3UkGbEqURemIdkM4bbJepXL-Qo5KZoY2vajHEcioSYibC6pJhj0if9xhcjgjTsiGJAbTs_wL6RJvT2AiSzLhIyXzw2aLreb3ac9AT8-fSbD-1yMuuPVty_KKWvqZBEO1i
                profile:
                  id: ''
                  enabled: false
                  firstname: Javier
                  lastname: Rabbit
                  emails:
                    - roger.rabbit@intersec.com
                  mobilePhones:
                    - +336********
                  homePhones:
                    - +331********
                  language: FR
                  additionals: []
                  unverified:
                    emails:
                      - address: roger.rabbit@gmx.com
                      - address: nathan.lemaire@gmail.com
                    mobilePhones:
                      - address: +336********
                    homePhones:
                      - address: +331********
                  pois:
                    - address: >-
                        RIVERHAYES LATCHMOOR GREEN, THORVERTON, EXETER, EX5
                        5LY
                      coordinates:
                        latitude: 53038212
                        longitude: -3803321
                    - address: 3, LONDON TERRACE, PENMACHNO, BETWS-Y-COED, LL24 0YF
                      coordinates:
                        latitude: 53038762
                        longitude: -3803799
                    - address: >-
                        LONDON HOUSE, HIGH STREET, LLANFAIR CAEREINION, Y
                        TRALLWNG, SY21 0QS
                      coordinates:
                        latitude: 52647922
                        longitude: -3326470
                    - address: >-
                        LONG BARN, NEW LODGE FARM, PETERCHURCH, HEREFORD,
                        HR3 6BJ
                      coordinates:
                        latitude: 52045694
                        longitude: -3012498
                    - address: 15, ST JOHN'S WAY, HACKNEY, LONDON, N19 3PR
                      coordinates:
                        latitude: 51568282
                        longitude: -130459
                    - address: 15, PARK STREET, BROUGHTON, SALFORD, M7 4JL
                      coordinates:
                        latitude: 53503528
                        longitude: -2248191
                    - address: 6, MAIN STREET, CALDECOTT, CORBY, NN17 3DL
                      coordinates:
                        latitude: 52486285
                        longitude: -762676
                    - address: 1, CHURCH STREET, SPROXTON, MELTON MOWBRAY, LE14 4PJ
                      coordinates:
                        latitude: 52817654
                        longitude: -897262
                    - address: 3, BIRDWELL ROAD, WITTON, BIRMINGHAM, B6 6SE
                      coordinates:
                        latitude: 52499273
                        longitude: -1896877
                    - address: 3, SOUTH END, FRODSHAM, WARRINGTON, WA6 7AU
                      coordinates:
                        latitude: 53295202
                        longitude: -2720613
                    - address: 33, UPPER BELGRAVE ROAD, CLIFTON, BRISTOL, BS8 2XN
                      coordinates:
                        latitude: 51459123
                        longitude: -2619273
                    - address: 3, HIGH STREET, THRAPSTON, KETTERING, NN14 4JH
                      coordinates:
                        latitude: 52382301
                        longitude: -554245
                    - address: 2, UNION STREET, TOTTON, SOUTHAMPTON, SO40 9DS
                      coordinates:
                        latitude: 50916096
                        longitude: -1484986
                    - address: >-
                        4, SOUTH PARADE, SUTTON BONINGTON, LOUGHBOROUGH,
                        LE12 5NR
                      coordinates:
                        latitude: 52836027
                        longitude: -1216102
                    - address: 18, MAES Y RHOS, PENYGROES, CAERNARFON, LL54 6AE
                      coordinates:
                        latitude: 53069538
                        longitude: -4272549
                    - address: >-
                        23, SHREWSBURY CLOSE, EAGLESTONE, MILTON KEYNES, MK6
                        5BQ
                      coordinates:
                        latitude: 52013912
                        longitude: -755356
    '500':
      description: Internal Server Error
      headers:
        date:
          schema:
            type: string
            example: Mon, 11 Mar 2024 17:27:25 GMT
        content-type:
          schema:
            type: string
            example: application/json; charset=utf-8
        content-length:
          schema:
            type: integer
            example: '56'
        accept-encoding:
          schema:
            type: string
            example: identity, gzip, deflate
        access-control-allow-origin:
          schema:
            type: string
            example: '*'
        cache-control:
          schema:
            type: string
            example: no-store, no-cache, must-revalidate
        pragma:
          schema:
            type: string
            example: no-cache
        content-encoding:
          schema:
            type: string
            example: gzip
        x-iplb-request-id:
          schema:
            type: string
            example: 3656328B:BC3F_05C462FB:01BB_65EF3EFD_CCF12:2B3A
        x-iplb-instance:
          schema:
            type: integer
            example: '53497'
      content:
        application/json:
          schema:
            type: object
          example:
            code: 101
            desc: invalid token
